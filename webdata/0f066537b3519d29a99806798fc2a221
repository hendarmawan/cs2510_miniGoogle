<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">
<HTML>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<base target=1502main>
<link rel=File-List href="Synthesis1_files/filelist.xml">
<link rel=Edit-Time-Data href="Synthesis1_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Unit 2: Synthesizing the ALU</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Sam Dickerson</o:Author>
  <o:LastAuthor>Sam Dickerson</o:LastAuthor>
  <o:Revision>13</o:Revision>
  <o:TotalTime>30</o:TotalTime>
  <o:Created>2005-09-30T17:45:00Z</o:Created>
  <o:LastSaved>2005-10-10T17:01:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1090</o:Words>
  <o:Characters>6216</o:Characters>
  <o:Company>University of Pittsburgh</o:Company>
  <o:Lines>51</o:Lines>
  <o:Paragraphs>14</o:Paragraphs>
  <o:CharactersWithSpaces>7292</o:CharactersWithSpaces>
  <o:Version>11.6568</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h2
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h3
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
pre
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:140268904;
	mso-list-template-ids:1740137064;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l1
	{mso-list-id:1777676585;
	mso-list-template-ids:1765966822;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l1:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="5122"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white background="../Unitbkg.jpg" lang=EN-US link=blue
vlink=blue style='tab-interval:.5in'>

<div class=Section1>

<h2 align=center style='text-align:center'>Unit 2</h2>

<h2 align=center style='text-align:center'>Synthesizing the ALU</h2>

<h3 align=center style='text-align:center'>Synthesis Concepts</h3>

<p>You have now designed and simulated an ALU for the MIPS architecture in VHDL
using the <b>FPGA Advantage</b> and <b>ModelSim</b> tools in <b>HDL Designer</b>.
The VHDL source code, however, does not contain the information necessary to
directly implement the desired device in hardware, whether it be in a
reconfigurable device such as an FPGA or in a custom ASIC. </p>

<p>In this class we wish to implement our designs in Xilinx brand FPGA's from
the XC2VP100 family. These devices have a particular structure, consisting of
Combinational Logic Blocks (CLBs), interconnect, and Input/Output Blocks
(IOBs). Our VHDL description of the behavior of the desired device must be
translated into a <i>netlist</i> file of logic which can be mapped into CLBs,
IOBs and interconnect by Xilinx tools. </p>

<p>The process of taking VHDL source and creating a logic netlist is called <i>Synthesis</i>.
The <b>Xilinx</b> synthesis tool is <b>XST (Xilinx Synthesis Tool)</b>, which
will take your VHDL source code and sythesize it into logic, outputting an <i>NGC</i>
netlist file. </p>

<h3 align=center style='text-align:center'>Copying the ALU Wrpper Design Unit</h3>

<p>Before we even begin to think about synthesizing the ALU, there is one other
step we must consider concerning the particular platform which we be
implementing the design on. The hardware which we will be using to implement
our designs is a reconfigurable computing board called a <i>Wild-Star II Pro</i>
board which is made by a company called Annapolis Microsystems. The <i>Wild-Star</i>
board consists of a user configurable Xilinx Virtex-II PRO FPGAs which are
referred to as processing elements (PE), as well as DRAM memory, a PCI
interface, and connectors which we can use to interface to the logic analyzers.
</p>

<p>Due to the fact that the FPGA's are soldered onto the board with predefined
I/O connections, it is necessary to have a framework around our logic design
which sets up the interface to the rest of the <i>Wild-Star</i> card. The
external framework will be given to you as a pre-synthesized netlist which will
be merged with your design when it is fed to the Xilinx tools which place and
route the logic into a binary file that can be uploaded to configure the FPGA. </p>

<p>In addition to the interface framework, however, it is also necessary to
create logic for this ALU test which will handle communication with the PCI bus
so that test data can be uploaded from the host and results can be returned. A
&quot;wrapper&quot; design unit has been created which will perform these tasks
and interface directly with your ALU design. </p>

<p>The wrapper design is called <i>wrapper</i> and a copy has been placed into
the COELib design library where your ADD64 design unit is located. Since this
library is read-only for the class, you will need to make a copy of the <i>wrapper
</i><span style='mso-bidi-font-style:italic'>and its sub components into</span>
your ALU library. It has been created so that it can be copied from one library
to another without creating any problems with incorrect library references. <b>You
must, however, make sure that your ALU design has been created with the library
correctly named ALU in all capital letters. Although VHDL is not case
sensitive, FPGA Advantage is in certain cases.</b> </p>

<p>To copy the <i>wrapper</i> design unit from the COELib library to the ALU
library, first open both libraries in the <b>Design Browser</b> window. In the <i>Project</i>
tab, expand the <i>COELib</i> library tree and select the <i>wrapper</i> design
unit. Go to the <i>Edit</i> menu and click on <i>Copy</i>. Now open the <i>ALU</i>
library and select <i>Paste</i> from the <i>Edit</i> menu to copy the design
unit.<span style='mso-spacerun:yes'>  </span>Repeat these steps for the <i
style='mso-bidi-font-style:normal'>input_interface ,Output_interface,
memory_loader and lad_control design units</i>.</p>

<p>On the right hand side of the design, you will notice an embedded (yellow)
block named &quot;LOGIC_ANALYZER_SIGNALS&quot;. This block will constitute your
interface to the logic analyzer. There are three busses assigned in this block
(to a default values), <b>ioconn_out0</b>, <b>ioconn_out1</b>, and <b>ioconn_out2</b>.
These busses represent each of the outputs that can connect pins on the FPGA to
a logic analyzer. Each connection consists of 32 signals, for a total of 96
possible output signals. You are responsible for connecting signals in the ALU
Wrapper to these busses so that you can examine the operation of your design on
the analyzer. To do this, change the contents of this embedded block such that
certain ranges of bits within each of these busses are assigned to values
within your design. For example, the following VHDL statement will assign the
low-order 8 bits of A to bits 15 down to 8 on the ioconn0 connector: </p>

<pre><o:p>&nbsp;</o:p></pre><pre><span style='mso-spacerun:yes'>  </span>ioconn_out0(15 downto 8) &lt;= A(7 downto 0);</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>The
recommended initial configuration for these signals is as follows: </p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo3;tab-stops:list .5in'>Connect Zero and Overflow. </li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo3;tab-stops:list .5in'>Connect the 4 bits of the
     ALUOp. </li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo3;tab-stops:list .5in'>Connect 16 bits each from the
     output of the A Register, the B Register, and the ALU Result. </li>
</ul>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:755.25pt;
 height:339.75pt'>
 <v:imagedata src="Synthesis1_files/image001.jpg" o:title="struct_bd"/>
</v:shape><![endif]--><![if !vml]><img width=1007 height=453
src="Synthesis1_files/image003.jpg" v:shapes="_x0000_i1025"><![endif]></p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><b
style='mso-bidi-font-weight:normal'>ALU Inside of FPGA Wrapper<o:p></o:p></b></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><o:p>&nbsp;</o:p></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Before
moving on, check to make sure that everything is OK with the copied design unit
by opening it up and then attempting to open some of the components, especially
the <i>ALU</i>. </p>

<h3 align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Using
HDL Designer to perform Synthesis</h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Now
we are ready to get started. First, in the Design Manager, open the &quot;Tasks
and Templates&quot; frame by selecting View | SubWindows | Tasks and Templates.
</p>

<p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><img
width=455 height=232 id="_x0000_i1026" src=tasksandtemplates.jpg></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Select
the <i>wrapper</i> in the <b>Design Browser</b> and double-click the <b>Xilinx
Synthesis Tool Flow</b> in the Tasks and Templates frame. </p>

<p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><img
width=399 height=145 id="_x0000_i1027" src=XST.jpg></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>At
this point, you will see the following window. Select 200 as the speed. Next,
click the <b>Advanced</b> button. </p>

<p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><img
width=306 height=175 id="_x0000_i1028" src="synthesis_setup.jpg"></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>In
this window, change the <b>Optimization Mode</b> to &quot;Speed&quot; and the <b>Optimization
Level</b> to &quot;High&quot;. Now, click the &quot;FPGA Specific&quot; tab. </p>

<p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><img
width=499 height=473 id="_x0000_i1029" src=advanced.jpg></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>In
this window, turn off the option &quot;Add I/O Buffers&quot;. Then click OK on
this window, and OK on the &quot;Synthesis Setup&quot; window. </p>

<p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><img
width=499 height=473 id="_x0000_i1030" src="fpga_specific.jpg"></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><i>XST</i>
will take a few minutes to completely run. During this process, <i>XST</i> does
three things. First, it takes the VHDL that was generated by <i>FPGA Advantage</i>
and breaks it down into a list of inter-connected logic gates. Then it attempts
to perform logic minimization; attempting to remove as much redundant logic as
necessary to conserve space on the FPGA. Finally <i>XST</i> takes the optimized
netlist and builds the final output against the features that are provided by
the FPGA we are using, in this case the <i>Xilinx Virtex-II Pro
(2vp100ff1704-5)</i> on the <i>Wild-Star</i> board. Most of the output messages
that <i>XST</i> generates can be ignored but you may want to scroll through the
text to see some of what <i>XST</i> does. In particular you may want to find
where <i>XST</i> gives an area and timing report. This gives us an idea how
much of the logic capability of the FPGA we are using, for the ALU it should
not be very much. </p>

<p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><img
width=667 height=821 id="_x0000_i1031" src=report.jpg></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Symbol;mso-ascii-font-family:"Times New Roman"'>·</span><span
style='mso-spacerun:yes'>  </span>Now go on to <a href="PlaceandRoute.html">Mapping,
Placing, and Routing the Design</a>. </p>

</div>

</body>

</html>
