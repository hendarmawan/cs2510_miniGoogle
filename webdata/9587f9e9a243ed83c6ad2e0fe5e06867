<html>
<head>
   <title>Multimedia Software Engineering</title>
</head>
<a href="page11.html"><img src="previous.gif" align=left></a>
<a href="page13.html"><img src="next.gif" align=right></a>
<center>
   <br><br>
   <h1>JSP Example Using JDBC</h1>
   <br>
</center>
<font color="red">
<p>&lt!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Final//EN">
<br>&lt%@ page import="java.sql.*" %> 
<br>
<br>&ltHTML><br>
<br>&ltBODY BGCOLOR="white"><br>
<br>&ltFORM ACTION="&lt%=request.getRequestURI() %>" METHOD="POST"><br>
<br>&ltINPUT TYPE="text" name="query" size="15" MAXLENGTH="30"
<br>       VALUE="&lt% if (request.getParameter("query") != null)
<br>       out.print(request.getParameter("query")); %>" %><br>
<br>&ltINPUT TYPE="submit" VALUE="Search"><br>
<br>&lt/FORM><br>
<br>&ltTABLE BORDER="1" CELLPADDING="3" CELLSPACING="0">
<br>   &ltTR>&ltTD>&ltB>First Name&lt/B>&lt/TD>
<br>       &ltTD>&ltB>Last Name&lt/B>&lt/TD>
<br>       &ltTD>&ltB>Title&lt/B>&lt/TD>
<br>       &ltTD>&ltB>Phone&lt/B>&lt/TD>
<br>       &ltTD>&ltB>Building&lt/B>&lt/TD>
<br>       &ltTD>&ltB>State&lt/B>&lt/TD>
<br>       &ltTD>&ltB>Start Date&lt/B>&lt/TD>&lt/TR><br>
<br>&lt%<br>
<br> if (request.getParameter("query") != null) { 
<br>     String url  = 
<br>          "jdbc:oracle:thin:@www.javadesktop.com:1521:JSPBOOK";
<br>     String id   = "jsp";
<br>     String pass = "book";
<br>     String query = request.getParameter("query").toLowerCase(); 
<br>     String sql  = "SELECT * FROM system_users,state where " +
<br>                   "(LOWER(first_name) LIKE '%" + query +
<br>	            "%' OR LOWER(last_name) LIKE '%" + query +
<br>		          "%') AND system_users.state_init " +
<br>                   "= state.state_init ORDER BY first_name";
<br>   
<br>     Class.forName("oracle.jdbc.driver.OracleDriver");
<br>     Connection conn = DriverManager.getConnection(url, id, pass);
<br>     Statement stmt = conn.createStatement();
<br>     ResultSet rset = stmt.executeQuery(sql);
<br>
<br>     while (rset.next()){
<br>       String phNum = "(" + rset.getString("phone").substring(0,3) +
<br>                      ")" + rset.getString("phone").substring(3,6) +
<br>                      "." + rset.getString("phone").substring(6,10);
<br><br>     %><br>
<br>      &ltTR>&ltTD>&lt%= rset.getString("first_name") %>
<br>      &lt/TD>&ltTD>&lt%= rset.getString("last_name") %>
<br>      &lt/TD>&ltTD>&lt%= rset.getString("title") %>
<br>      &lt/TD>&ltTD>&lt%= phNum %>
<br>      &lt/TD>&ltTD>&lt%= rset.getString("building") %>
<br>      &lt/TD>&ltTD>&lt%= rset.getString("state_name") %>
<br>      &lt/TD>&ltTD>&lt%= rset.getDate("entry_date") %>
<br>      &lt/TD>&lt/TR>
<br><br>     &lt%<br>
<br>     }
<br>     stmt.close();
<br>     conn.close();
<br> }
<br><br>%><br>
<br>&lt/TABLE>
<br>&lt/BODY>
<br>&lt/HTML></p>
</font>



</html>
